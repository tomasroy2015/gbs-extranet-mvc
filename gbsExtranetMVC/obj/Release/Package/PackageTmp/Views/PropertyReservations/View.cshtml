@using Resources
@using PropertyReservationsColumnCaption
@model gbsExtranetMVC.Models.Repositories.PropertyReservationExt

@{
    ViewBag.Title = "View";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<h2 style="color: black; text-align: center;">Property Reservation</h2>
<style>
    .tblUsers {
        text-align: left;
    }

        .tblUsers th, td {
            padding-top: 10px;
        }

        .tblUsers td {
            padding-left: 15px;
        }
    .GridTable {
        border-width: 1px;
        border-style: solid;
        border-color: #CCCCCC;
        border-collapse: collapse;
        background-color: #ebf4f8;
    }

        .GridTable td {
            border-width: 1px;
            padding: 1px;
            border-style: solid;
            border-color: #CCCCCC;
            -moz-border-radius:;
        }
    .NoWrap {
        white-space: nowrap;
    }
    .spacewidth{
        width:25%;
    }
</style>

<div id="content" class="span10">
@using (Html.BeginForm("PropertyReservations", "Reservation", FormMethod.Post))
    {
    @Html.HiddenFor(u => u.ReservationID)
    <div id="qms-detail-table-wrapper" class="center">
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <tbody>
                    <tr>
                        <th class="spacewidth">@Html.LabelFor(m => m.Property, Resources.Property)</th>
                        <td class="spacewidth">@Html.DisplayFor(m => m.Property)</td>
                        <th class="spacewidth">@Html.LabelFor(m => m.RoomCount, Resources.RoomCount)</th>
                        <td class="spacewidth">@Html.DisplayFor(m => m.RoomCount)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.ReservationID, Resources.ReservationID)</th>
                        <td>@Html.DisplayFor(m => m.ReservationID)</td>
                        <th>@Html.LabelFor(m => m.PeopleCount, Resources.PeopleCount)</th>
                        <td>@Html.DisplayFor(m => m.PeopleCount)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.ReservationDate, Resources.ReservationDate)</th>
                        <td>@Html.DisplayFor(m => m.ReservationDate)</td>
                        <th>@Html.LabelFor(m => m.PayableAmount, Resources.PayableAmount)</th>
                        <td>@Html.DisplayFor(m => m.PayableAmount)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.Status, Resources.ReservationStatus)</th>
                        <td>@Html.DisplayFor(m => m.Status)</td>
                        <th>@Html.LabelFor(m => m.Commission, Resources.Comission)</th>
                        <td>@Html.DisplayFor(m => m.Commission)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.ReservationOwner, Resources.Reserver)</th>
                        <td>@Html.DisplayFor(m => m.ReservationOwner)</td>
                        <th>@Html.LabelFor(m => m.HotelPostCode, Resources.HotelConditions)</th>                       
                        <td>
                        @if (ViewBag.ReservationDetails != null)
                        {
                            var last_item_Main = ((List<gbsExtranetMVC.Models.Repositories.PropertyReservationExt>)ViewBag.ReservationDetails).FirstOrDefault();
                           
                             foreach (var PropertyConditions in ViewBag.ReservationDetails)
                             {
                                 if (last_item_Main == PropertyConditions)
                                 {
                                   foreach (var PropertyConditions1 in PropertyConditions.PropertyConditionslist)
                                    {
                                     <li>@PropertyConditions1</li>
                                    }
                                 }
                               
                                
                            }
                          }
                        </td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.CheckInDate, Resources.CheckInDate)</th>
                        <td>@Html.DisplayFor(m => m.CheckInDate)</td>
                        <th>@Html.LabelFor(m => m.Note, Resources.GuestNote)</th>
                        <td>@Html.DisplayFor(m => m.Note)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.CheckOutDate, Resources.CheckOutDate)</th>
                        <td>@Html.DisplayFor(m => m.CheckOutDate)</td>
                       @if (ViewBag.ReservationPromotion != null)
                       {
                          var Item_Length = ((List<String>)ViewBag.ReservationPromotion).Count();
                          if (Item_Length>0)
                          {
                                <th>@Html.LabelFor(m => m.Property, Resources.Promotion)</th>
                               <td>
                                   @*}*@
                               
                                   @foreach (var ReservationPromotion in ViewBag.ReservationPromotion)
                                   {
                               
                                       <li>@Html.Raw(ReservationPromotion)</li>
                                   }
                                   @*@if (Item_Length>0)
                                   {*@
                               </td>
                          }

                       }
</tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.NightCount, Resources.NightCount)</th>
                        <td>@Html.DisplayFor(m => m.NightCount)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.Email, Resources.Email)</th>
                        <td>@Html.DisplayFor(m => m.Email)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.Phone, Resources.Phone)</th>
                        <td>@Html.DisplayFor(m => m.Phone)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.Address, Resources.Address)</th>
                        <td>@Html.DisplayFor(m => m.Address)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.PostCode, Resources.Postcode)</th>
                        <td>@Html.DisplayFor(m => m.PostCode)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.City, Resources.City)</th>
                        <td>@Html.DisplayFor(m => m.City)</td>
                    </tr>
                    <tr>
                        <th>@Html.LabelFor(m => m.CountryName, Resources.Country)</th>
                        <td>@Html.DisplayFor(m => m.CountryName)</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="table-responsive">

            @if (ViewBag.ReservationDetails != null)
            {
                int CountRooms=1;
                foreach (var PropertyConditions in ViewBag.ReservationDetails)
                {
                    <table class="table table-striped table-bordered">
                <tbody>


                    <tr>
                        <th colspan="2">
                            <h4 style="color: black; text-align: center;">@Resources.Room <label> @CountRooms</label> - <label> @PropertyConditions.Rooms</label></h4>                           
                        </th>                        
                    </tr>
                    <tr>
                        <th><label>@Resources.ReservationStatus</label></th>
                        <td><label>@PropertyConditions.Status</label></td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.AccommodationType</label> </th>
                        <td> <label>@PropertyConditions.AccommodationName</label></td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.GuestName</label> </th>
                        <td> <label>@PropertyConditions.GuestFullName</label></td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.PeopleCount</label>  </th>
                        <td> <label>@PropertyConditions.PeopleCount</label></td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.BedPreference</label></th>
                        <td> <label>@PropertyConditions.SelectedBedText</label></td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.TotalRoomPrice</label></th>
                        <td> <label>@PropertyConditions.Currencysymbol  @PropertyConditions.RoomPrice</label></td>
                    </tr>
                    <tr>
                        <th><label>@Resources.NightPrice</label></th>

                        <td>
                            <table class="GridTable">
                                <tr>
                                    @foreach (var RoomRateDay in @PropertyConditions.RoomRateDetailslist)
                                    {
                                        <td align="center" class="NoWrap" style="padding:4px;">
                                            <b>@RoomRateDay.Day &nbsp; @RoomRateDay.MonthName</b>
                                        </td>
                                    }
                                </tr>
                                <tr>
                                    @foreach (var RoomRate in @PropertyConditions.RoomRateDetailslist)
                                    {
                                        <td align="center" class="NoWrap">
                                            @RoomRate.CurrencySymbol @RoomRate.RoomPrice
                                        </td>
                                    }
                                </tr>
                            </table>
                        </td>
                        
                    </tr>
                    <tr>
                        <th> <label>@Resources.TravellerType</label> </th>
                        <td> <label>@PropertyConditions.TravellerTypeName</label></td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.EstimatedArrivalTime</label></th>
                        <td> <label>@PropertyConditions.EstimatedArrivalTime</label> </td>
                    </tr>
                    <tr>
                        <th> <label>@Resources.CancelPolicy</label></th>
                        <td>
                            <label>@PropertyConditions.CancelPolicy</label> <br />
                            <label>@PropertyConditions.CancelPolicyDesc</label> 
                         </td>
                    </tr>
                    @*<tr>
                        <td colspan="2" style="color: black; text-align: center;">
                            <a href="@ViewBag.ReturnUrl"> <input type="button" value="Back" onclick="" class="k-button" style="width:80px; height:30px; background-color:#0062D9; color:white; font-weight:bold;" /></a>
                        </td>                        
                    </tr>*@
                </tbody>
            </table>
                    CountRooms++;
                }
                
            }

            <div align="center">
                <a href="@ViewBag.ReturnUrl"> <input type="button" value="Back" onclick="" class="k-button" style="width:80px; height:30px; background-color:#0062D9; color:white; font-weight:bold;" /></a>
            </div>
            
        </div>

    </div>
}
</div>


@*<script>
    function Backbtn() {
        window.location.href = '/Reservation/PropertyReservations';
    }
</script>*@  


<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-63530100-1', 'auto');
    ga('send', 'pageview');

</script>